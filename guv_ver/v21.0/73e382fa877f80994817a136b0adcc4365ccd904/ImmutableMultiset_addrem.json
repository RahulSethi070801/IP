{
    "addition": {
        "21": "import com.google.common.annotations.Beta;\n",
        "32": "import java.util.function.Function;\n",
        "33": "import java.util.function.ToIntFunction;\n",
        "34": "import java.util.stream.Collector;\n",
        "57": "\n",
        "58": "  /**\n",
        "59": "   * Returns a {@code Collector} that accumulates the input elements into a new\n",
        "60": "   * {@code ImmutableMultiset}.  Elements iterate in order by the <i>first</i> appearance of that\n",
        "61": "   * element in encounter order.\n",
        "62": "   *\n",
        "63": "   * @since 21.0\n",
        "64": "   */\n",
        "65": "  @Beta\n",
        "66": "  public static <E> Collector<E, ?, ImmutableMultiset<E>> toImmutableMultiset() {\n",
        "67": "    return toImmutableMultiset(Function.identity(), e -> 1);\n",
        "68": "  }\n",
        "69": "\n",
        "70": "  /**\n",
        "71": "   * Returns a {@code Collector} that accumulates elements into an {@code ImmutableMultiset}\n",
        "72": "   * whose elements are the result of applying {@code elementFunction} to the inputs,\n",
        "73": "   * with counts equal to the result of applying {@code countFunction} to the inputs.\n",
        "74": "   *\n",
        "75": "   * <p>If the mapped elements contain duplicates (according to {@link Object#equals}),\n",
        "76": "   * the first occurrence in encounter order appears in the resulting multiset, with count\n",
        "77": "   * equal to the sum of the outputs of {@code countFunction.applyAsInt(t)} for each {@code t}\n",
        "78": "   * mapped to that element.\n",
        "79": "   */\n",
        "80": "  private static <T, E> Collector<T, ?, ImmutableMultiset<E>> toImmutableMultiset(\n",
        "81": "      Function<? super T, ? extends E> elementFunction, ToIntFunction<? super T> countFunction) {\n",
        "82": "    // TODO(lowasser): consider exposing this\n",
        "83": "    checkNotNull(elementFunction);\n",
        "84": "    checkNotNull(countFunction);\n",
        "85": "    return Collector.of(\n",
        "86": "        LinkedHashMultiset::create,\n",
        "87": "        (multiset, t) -> multiset.add(elementFunction.apply(t), countFunction.applyAsInt(t)),\n",
        "88": "        (multiset1, multiset2) -> {\n",
        "89": "          multiset1.addAll(multiset2);\n",
        "90": "          return multiset1;\n",
        "91": "        },\n",
        "92": "        (Multiset<E> multiset) -> copyFromEntries(multiset.entrySet()));\n",
        "93": "  }\n",
        "94": "\n"
    },
    "removed": {
        "23": "import com.google.common.collect.Multiset.Entry;\n"
    }
}