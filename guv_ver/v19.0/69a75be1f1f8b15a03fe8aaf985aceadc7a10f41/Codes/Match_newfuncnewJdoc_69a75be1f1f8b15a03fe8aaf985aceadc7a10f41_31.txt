 TODO(cpovirk): Use maybePropagateCancellation() if the performance is OK and the code is clean.