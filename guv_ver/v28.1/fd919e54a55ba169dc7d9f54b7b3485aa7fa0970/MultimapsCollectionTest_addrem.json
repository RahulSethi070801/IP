{
    "addition": {
        "87": "    MultisetTestSuiteBuilder.NoRecurse.NO_ENTRY_SET, // Cannot create entries with count > 1\n",
        "98": "  static void populateMultimapForGet(Multimap<Integer, String> multimap, String[] elements) {\n",
        "105": "  static void populateMultimapForKeySet(Multimap<String, Integer> multimap, String[] elements) {\n",
        "112": "  static void populateMultimapForValues(Multimap<Integer, String> multimap, String[] elements) {\n",
        "118": "  static void populateMultimapForKeys(Multimap<String, Integer> multimap, String[] elements) {\n",
        "125": "   * Implements {@code Multimap.put()} -- and no other methods -- for a {@code Map} by ignoring all\n",
        "126": "   * but the latest value for each key. This class exists only so that we can use {@link\n",
        "127": "   * MultimapsCollectionTest#populateMultimapForGet(Multimap, String[])} and similar methods to\n",
        "128": "   * populate a map to be passed to {@link Multimaps#forMap(Map)}. All tests should run against the\n",
        "129": "   * result of {@link #build()}.\n",
        "131": "  private static final class PopulatableMapAsMultimap<K, V> extends ForwardingMultimap<K, V> {\n",
        "139": "    @SuppressWarnings(\"unchecked\") // all methods throw immediately\n",
        "142": "      this.unusableDelegate =\n",
        "143": "          (SetMultimap<K, V>)\n",
        "144": "              newProxyInstance(\n",
        "145": "                  SetMultimap.class.getClassLoader(),\n",
        "146": "                  new Class<?>[] {SetMultimap.class},\n",
        "147": "                  new InvocationHandler() {\n",
        "148": "                    @Override\n",
        "149": "                    public Object invoke(Object proxy, Method method, Object[] args)\n",
        "150": "                        throws Throwable {\n",
        "151": "                      throw new UnsupportedOperationException();\n",
        "152": "                    }\n",
        "153": "                  });\n",
        "154": "    }\n",
        "155": "\n",
        "156": "    @Override\n",
        "157": "    protected Multimap<K, V> delegate() {\n",
        "161": "    @Override\n",
        "162": "    public boolean put(K key, V value) {\n",
        "204": "    public List<Entry<String, Integer>> order(List<Entry<String, Integer>> insertionOrder) {\n",
        "209": "  public abstract static class TestEntriesListGenerator extends TestEntriesGenerator\n",
        "211": "    @Override\n",
        "212": "    public List<Entry<String, Integer>> create(Object... elements) {\n",
        "217": "  private static final Predicate<Entry<Integer, String>> FILTER_GET_PREDICATE =\n",
        "218": "      new Predicate<Entry<Integer, String>>() {\n",
        "219": "        @Override\n",
        "220": "        public boolean apply(Entry<Integer, String> entry) {\n",
        "223": "      };\n",
        "225": "  private static final Predicate<Entry<String, Integer>> FILTER_KEYSET_PREDICATE =\n",
        "226": "      new Predicate<Entry<String, Integer>>() {\n",
        "227": "        @Override\n",
        "228": "        public boolean apply(Entry<String, Integer> entry) {\n",
        "229": "          return !\"badkey\".equals(entry.getKey()) && 55556 != entry.getValue();\n",
        "230": "        }\n",
        "231": "      };\n",
        "239": "    suite.addTest(\n",
        "240": "        ListMultimapTestSuiteBuilder.using(\n",
        "241": "                new TestStringListMultimapGenerator() {\n",
        "242": "                  @Override\n",
        "243": "                  protected ListMultimap<String, String> create(Entry<String, String>[] entries) {\n",
        "244": "                    ListMultimap<String, String> multimap =\n",
        "245": "                        Multimaps.synchronizedListMultimap(\n",
        "246": "                            ArrayListMultimap.<String, String>create());\n",
        "247": "                    for (Entry<String, String> entry : entries) {\n",
        "248": "                      multimap.put(entry.getKey(), entry.getValue());\n",
        "249": "                    }\n",
        "250": "                    return multimap;\n",
        "251": "                  }\n",
        "252": "                })\n",
        "253": "            .named(\"synchronized ArrayListMultimap\")\n",
        "254": "            .withFeatures(\n",
        "255": "                MapFeature.ALLOWS_NULL_KEYS,\n",
        "256": "                MapFeature.ALLOWS_NULL_VALUES,\n",
        "257": "                MapFeature.ALLOWS_ANY_NULL_QUERIES,\n",
        "258": "                MapFeature.GENERAL_PURPOSE,\n",
        "259": "                MapFeature.FAILS_FAST_ON_CONCURRENT_MODIFICATION,\n",
        "260": "                CollectionFeature.SUPPORTS_ITERATOR_REMOVE,\n",
        "261": "                CollectionSize.ANY)\n",
        "262": "            .createTestSuite());\n",
        "263": "\n",
        "264": "    suite.addTest(\n",
        "265": "        SetTestSuiteBuilder.using(\n",
        "266": "                new TestStringSetGenerator() {\n",
        "267": "                  @Override\n",
        "268": "                  protected Set<String> create(String[] elements) {\n",
        "269": "                    PopulatableMapAsMultimap<Integer, String> multimap =\n",
        "270": "                        PopulatableMapAsMultimap.create();\n",
        "271": "                    populateMultimapForGet(multimap, elements);\n",
        "272": "                    return multimap.build().get(3);\n",
        "273": "                  }\n",
        "274": "                })\n",
        "275": "            .named(\"Multimaps.forMap.get\")\n",
        "276": "            .withFeatures(FOR_MAP_FEATURES_ONE)\n",
        "277": "            .createTestSuite());\n",
        "278": "\n",
        "279": "    suite.addTest(\n",
        "280": "        SetTestSuiteBuilder.using(\n",
        "281": "                new TestStringSetGenerator() {\n",
        "282": "                  @Override\n",
        "283": "                  protected Set<String> create(String[] elements) {\n",
        "284": "                    PopulatableMapAsMultimap<String, Integer> multimap =\n",
        "285": "                        PopulatableMapAsMultimap.create();\n",
        "286": "                    populateMultimapForKeySet(multimap, elements);\n",
        "287": "                    return multimap.build().keySet();\n",
        "288": "                  }\n",
        "289": "                })\n",
        "290": "            .named(\"Multimaps.forMap.keySet\")\n",
        "291": "            .withFeatures(FOR_MAP_FEATURES_ANY)\n",
        "292": "            .createTestSuite());\n",
        "296": "    suite.addTest(\n",
        "297": "        MultisetTestSuiteBuilder.using(\n",
        "298": "                new TestStringMultisetGenerator() {\n",
        "299": "                  @Override\n",
        "300": "                  protected Multiset<String> create(String[] elements) {\n",
        "301": "                    PopulatableMapAsMultimap<String, Integer> multimap =\n",
        "302": "                        PopulatableMapAsMultimap.create();\n",
        "303": "                    populateMultimapForKeys(multimap, elements);\n",
        "304": "                    return multimap.build().keys();\n",
        "305": "                  }\n",
        "306": "                })\n",
        "307": "            .named(\"Multimaps.forMap.keys\")\n",
        "308": "            .withFeatures(FOR_MAP_FEATURES_ANY)\n",
        "309": "            .suppressing(getCountDuplicateInitializingMethods())\n",
        "310": "            .suppressing(getSetCountDuplicateInitializingMethods())\n",
        "311": "            .suppressing(getIteratorDuplicateInitializingMethods())\n",
        "312": "            .suppressing(getRemoveDuplicateInitializingMethods())\n",
        "313": "            .createTestSuite());\n",
        "320": "  abstract static class TransformedMultimapGenerator<M extends Multimap<String, String>>\n",
        "382": "    static final Function<String, String> FUNCTION =\n",
        "383": "        new Function<String, String>() {\n",
        "384": "          @Override\n",
        "385": "          public String apply(String value) {\n",
        "386": "            return Ascii.toLowerCase(value);\n",
        "387": "          }\n",
        "388": "        };\n",
        "392": "          @Override\n",
        "393": "          public String transformEntry(String key, String value) {\n",
        "394": "            return Ascii.toLowerCase(value);\n",
        "395": "          }\n",
        "396": "        };\n",
        "399": "  abstract static class TransformedListMultimapGenerator\n",
        "401": "      implements TestListMultimapGenerator<String, String> {}\n",
        "405": "    suite.addTest(\n",
        "406": "        MultimapTestSuiteBuilder.using(\n",
        "407": "                new TransformedMultimapGenerator<Multimap<String, String>>() {\n",
        "408": "                  @Override\n",
        "409": "                  Multimap<String, String> transform(Multimap<String, String> multimap) {\n",
        "410": "                    return Multimaps.transformValues(multimap, FUNCTION);\n",
        "411": "                  }\n",
        "412": "                })\n",
        "413": "            .named(\"Multimaps.transformValues[Multimap]\")\n",
        "414": "            .withFeatures(\n",
        "415": "                CollectionSize.ANY,\n",
        "416": "                MapFeature.SUPPORTS_REMOVE,\n",
        "417": "                CollectionFeature.SUPPORTS_ITERATOR_REMOVE,\n",
        "418": "                MapFeature.ALLOWS_NULL_KEYS,\n",
        "419": "                MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "420": "            .createTestSuite());\n",
        "421": "    suite.addTest(\n",
        "422": "        MultimapTestSuiteBuilder.using(\n",
        "423": "                new TransformedMultimapGenerator<Multimap<String, String>>() {\n",
        "424": "                  @Override\n",
        "425": "                  Multimap<String, String> transform(Multimap<String, String> multimap) {\n",
        "426": "                    return Multimaps.transformEntries(multimap, ENTRY_TRANSFORMER);\n",
        "427": "                  }\n",
        "428": "                })\n",
        "429": "            .named(\"Multimaps.transformEntries[Multimap]\")\n",
        "430": "            .withFeatures(\n",
        "431": "                CollectionSize.ANY,\n",
        "432": "                MapFeature.SUPPORTS_REMOVE,\n",
        "433": "                CollectionFeature.SUPPORTS_ITERATOR_REMOVE,\n",
        "434": "                MapFeature.ALLOWS_NULL_KEYS,\n",
        "435": "                MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "436": "            .createTestSuite());\n",
        "437": "    suite.addTest(\n",
        "438": "        ListMultimapTestSuiteBuilder.using(\n",
        "439": "                new TransformedListMultimapGenerator() {\n",
        "440": "                  @Override\n",
        "441": "                  ListMultimap<String, String> transform(Multimap<String, String> multimap) {\n",
        "442": "                    return Multimaps.transformValues(\n",
        "443": "                        (ListMultimap<String, String>) multimap, FUNCTION);\n",
        "444": "                  }\n",
        "445": "                })\n",
        "446": "            .named(\"Multimaps.transformValues[ListMultimap]\")\n",
        "447": "            .withFeatures(\n",
        "448": "                CollectionSize.ANY,\n",
        "449": "                MapFeature.SUPPORTS_REMOVE,\n",
        "450": "                CollectionFeature.SUPPORTS_ITERATOR_REMOVE,\n",
        "451": "                MapFeature.ALLOWS_NULL_KEYS,\n",
        "452": "                MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "453": "            .createTestSuite());\n",
        "454": "    suite.addTest(\n",
        "455": "        ListMultimapTestSuiteBuilder.using(\n",
        "456": "                new TransformedListMultimapGenerator() {\n",
        "457": "                  @Override\n",
        "458": "                  ListMultimap<String, String> transform(Multimap<String, String> multimap) {\n",
        "459": "                    return Multimaps.transformEntries(\n",
        "460": "                        (ListMultimap<String, String>) multimap, ENTRY_TRANSFORMER);\n",
        "461": "                  }\n",
        "462": "                })\n",
        "463": "            .named(\"Multimaps.transformEntries[ListMultimap]\")\n",
        "464": "            .withFeatures(\n",
        "465": "                CollectionSize.ANY,\n",
        "466": "                MapFeature.SUPPORTS_REMOVE,\n",
        "467": "                CollectionFeature.SUPPORTS_ITERATOR_REMOVE,\n",
        "468": "                MapFeature.ALLOWS_NULL_KEYS,\n",
        "469": "                MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "470": "            .createTestSuite());\n",
        "477": "  abstract static class TestFilteredMultimapGenerator<M extends Multimap<String, Integer>>\n",
        "522": "  abstract static class FilteredSetMultimapGenerator\n",
        "545": "  abstract static class FilteredListMultimapGenerator\n",
        "570": "    suite.addTest(\n",
        "571": "        SetMultimapTestSuiteBuilder.using(\n",
        "572": "                new FilteredSetMultimapGenerator() {\n",
        "573": "                  @Override\n",
        "574": "                  SetMultimap<String, Integer> filter(SetMultimap<String, Integer> multimap) {\n",
        "575": "                    multimap.put(\"foo\", 17);\n",
        "576": "                    multimap.put(\"bar\", 32);\n",
        "577": "                    multimap.put(\"foo\", 16);\n",
        "578": "                    return Multimaps.filterKeys(\n",
        "579": "                        multimap, Predicates.not(Predicates.in(ImmutableSet.of(\"foo\", \"bar\"))));\n",
        "580": "                  }\n",
        "581": "                })\n",
        "582": "            .named(\"Multimaps.filterKeys[SetMultimap, Predicate]\")\n",
        "583": "            .withFeatures(\n",
        "584": "                CollectionSize.ANY,\n",
        "585": "                MultimapFeature.VALUE_COLLECTIONS_SUPPORT_ITERATOR_REMOVE,\n",
        "586": "                MapFeature.GENERAL_PURPOSE,\n",
        "587": "                MapFeature.ALLOWS_NULL_KEYS,\n",
        "588": "                MapFeature.ALLOWS_NULL_VALUES,\n",
        "589": "                MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "590": "            .createTestSuite());\n",
        "591": "\n",
        "592": "    suite.addTest(\n",
        "593": "        ListMultimapTestSuiteBuilder.using(\n",
        "594": "                new FilteredListMultimapGenerator() {\n",
        "595": "                  @Override\n",
        "596": "                  ListMultimap<String, Integer> filter(ListMultimap<String, Integer> multimap) {\n",
        "597": "                    multimap.put(\"foo\", 17);\n",
        "598": "                    multimap.put(\"bar\", 32);\n",
        "599": "                    multimap.put(\"foo\", 16);\n",
        "600": "                    return Multimaps.filterKeys(\n",
        "601": "                        multimap, Predicates.not(Predicates.in(ImmutableSet.of(\"foo\", \"bar\"))));\n",
        "602": "                  }\n",
        "603": "                })\n",
        "604": "            .named(\"Multimaps.filterKeys[ListMultimap, Predicate]\")\n",
        "605": "            .withFeatures(\n",
        "606": "                CollectionSize.ANY,\n",
        "607": "                MultimapFeature.VALUE_COLLECTIONS_SUPPORT_ITERATOR_REMOVE,\n",
        "608": "                MapFeature.GENERAL_PURPOSE,\n",
        "609": "                MapFeature.ALLOWS_NULL_KEYS,\n",
        "610": "                MapFeature.ALLOWS_NULL_VALUES,\n",
        "611": "                MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "612": "            .createTestSuite());\n",
        "613": "    suite.addTest(\n",
        "614": "        ListMultimapTestSuiteBuilder.using(\n",
        "615": "                new FilteredListMultimapGenerator() {\n",
        "616": "                  @Override\n",
        "617": "                  ListMultimap<String, Integer> filter(ListMultimap<String, Integer> multimap) {\n",
        "618": "                    multimap.put(\"foo\", 17);\n",
        "619": "                    multimap.put(\"bar\", 32);\n",
        "620": "                    multimap.put(\"foo\", 16);\n",
        "621": "                    multimap =\n",
        "622": "                        Multimaps.filterKeys(multimap, Predicates.not(Predicates.equalTo(\"foo\")));\n",
        "623": "                    return Multimaps.filterKeys(\n",
        "624": "                        multimap, Predicates.not(Predicates.equalTo(\"bar\")));\n",
        "625": "                  }\n",
        "626": "                })\n",
        "627": "            .named(\"Multimaps.filterKeys[Multimaps.filterKeys[ListMultimap], Predicate]\")\n",
        "628": "            .withFeatures(\n",
        "629": "                CollectionSize.ANY,\n",
        "630": "                MultimapFeature.VALUE_COLLECTIONS_SUPPORT_ITERATOR_REMOVE,\n",
        "631": "                MapFeature.GENERAL_PURPOSE,\n",
        "632": "                MapFeature.ALLOWS_NULL_KEYS,\n",
        "633": "                MapFeature.ALLOWS_NULL_VALUES,\n",
        "634": "                MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "635": "            .createTestSuite());\n",
        "636": "    suite.addTest(\n",
        "637": "        SetMultimapTestSuiteBuilder.using(\n",
        "638": "                new FilteredSetMultimapGenerator() {\n",
        "639": "                  @Override\n",
        "640": "                  SetMultimap<String, Integer> filter(SetMultimap<String, Integer> multimap) {\n",
        "641": "                    multimap.put(\"one\", 314);\n",
        "642": "                    multimap.put(\"two\", 159);\n",
        "643": "                    multimap.put(\"one\", 265);\n",
        "644": "                    return Multimaps.filterValues(\n",
        "645": "                        multimap, Predicates.not(Predicates.in(ImmutableSet.of(314, 159, 265))));\n",
        "646": "                  }\n",
        "647": "                })\n",
        "648": "            .named(\"Multimaps.filterValues[SetMultimap, Predicate]\")\n",
        "649": "            .withFeatures(\n",
        "650": "                CollectionSize.ANY,\n",
        "651": "                MapFeature.GENERAL_PURPOSE,\n",
        "652": "                MapFeature.ALLOWS_NULL_KEYS,\n",
        "653": "                MapFeature.ALLOWS_NULL_VALUES,\n",
        "654": "                MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "655": "            .createTestSuite());\n",
        "656": "    suite.addTest(\n",
        "657": "        SetMultimapTestSuiteBuilder.using(\n",
        "658": "                new FilteredSetMultimapGenerator() {\n",
        "659": "                  @Override\n",
        "660": "                  SetMultimap<String, Integer> filter(SetMultimap<String, Integer> multimap) {\n",
        "661": "                    ImmutableSetMultimap<String, Integer> badEntries =\n",
        "662": "                        ImmutableSetMultimap.of(\"foo\", 314, \"one\", 159, \"two\", 265, \"bar\", 358);\n",
        "663": "                    multimap.putAll(badEntries);\n",
        "664": "                    return Multimaps.filterEntries(\n",
        "665": "                        multimap, Predicates.not(Predicates.in(badEntries.entries())));\n",
        "666": "                  }\n",
        "667": "                })\n",
        "668": "            .named(\"Multimaps.filterEntries[SetMultimap, Predicate]\")\n",
        "669": "            .withFeatures(\n",
        "670": "                CollectionSize.ANY,\n",
        "671": "                MapFeature.GENERAL_PURPOSE,\n",
        "672": "                MapFeature.ALLOWS_NULL_KEYS,\n",
        "673": "                MapFeature.ALLOWS_NULL_VALUES,\n",
        "674": "                MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "675": "            .createTestSuite());\n",
        "676": "    suite.addTest(\n",
        "677": "        SetMultimapTestSuiteBuilder.using(\n",
        "678": "                new FilteredSetMultimapGenerator() {\n",
        "679": "                  @Override\n",
        "680": "                  SetMultimap<String, Integer> filter(SetMultimap<String, Integer> multimap) {\n",
        "681": "                    ImmutableSetMultimap<String, Integer> badEntries =\n",
        "682": "                        ImmutableSetMultimap.of(\"foo\", 314, \"one\", 159, \"two\", 265, \"bar\", 358);\n",
        "683": "                    multimap.putAll(badEntries);\n",
        "684": "                    multimap =\n",
        "685": "                        Multimaps.filterKeys(\n",
        "686": "                            multimap, Predicates.not(Predicates.in(ImmutableSet.of(\"foo\", \"bar\"))));\n",
        "687": "                    return Multimaps.filterEntries(\n",
        "688": "                        multimap, Predicates.not(Predicates.in(badEntries.entries())));\n",
        "689": "                  }\n",
        "690": "                })\n",
        "691": "            .named(\"Multimaps.filterEntries[Multimaps.filterKeys[SetMultimap]]\")\n",
        "692": "            .withFeatures(\n",
        "693": "                CollectionSize.ANY,\n",
        "694": "                MapFeature.GENERAL_PURPOSE,\n",
        "695": "                MapFeature.ALLOWS_NULL_KEYS,\n",
        "696": "                MapFeature.ALLOWS_NULL_VALUES,\n",
        "697": "                MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "698": "            .createTestSuite());\n",
        "699": "    suite.addTest(\n",
        "700": "        SetMultimapTestSuiteBuilder.using(\n",
        "701": "                new FilteredSetMultimapGenerator() {\n",
        "702": "                  @Override\n",
        "703": "                  SetMultimap<String, Integer> filter(SetMultimap<String, Integer> multimap) {\n",
        "704": "                    ImmutableSetMultimap<String, Integer> badEntries =\n",
        "705": "                        ImmutableSetMultimap.of(\"foo\", 314, \"one\", 159, \"two\", 265, \"bar\", 358);\n",
        "706": "                    multimap.putAll(badEntries);\n",
        "707": "                    multimap =\n",
        "708": "                        Multimaps.filterEntries(\n",
        "709": "                            multimap,\n",
        "710": "                            Predicates.not(\n",
        "711": "                                Predicates.in(ImmutableMap.of(\"one\", 159, \"two\", 265).entrySet())));\n",
        "712": "                    return Multimaps.filterKeys(\n",
        "713": "                        multimap, Predicates.not(Predicates.in(ImmutableSet.of(\"foo\", \"bar\"))));\n",
        "714": "                  }\n",
        "715": "                })\n",
        "716": "            .named(\"Multimaps.filterKeys[Multimaps.filterEntries[SetMultimap]]\")\n",
        "717": "            .withFeatures(\n",
        "718": "                CollectionSize.ANY,\n",
        "719": "                MapFeature.GENERAL_PURPOSE,\n",
        "720": "                MapFeature.ALLOWS_NULL_KEYS,\n",
        "721": "                MapFeature.ALLOWS_NULL_VALUES,\n",
        "722": "                MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "723": "            .createTestSuite());\n",
        "724": "    suite.addTest(\n",
        "725": "        SetMultimapTestSuiteBuilder.using(\n",
        "726": "                new FilteredSetMultimapGenerator() {\n",
        "727": "                  @Override\n",
        "728": "                  SetMultimap<String, Integer> filter(SetMultimap<String, Integer> multimap) {\n",
        "729": "                    ImmutableSetMultimap<String, Integer> badEntries =\n",
        "730": "                        ImmutableSetMultimap.of(\"foo\", 314, \"bar\", 358);\n",
        "731": "                    multimap.putAll(badEntries);\n",
        "732": "                    multimap =\n",
        "733": "                        Multimaps.filterKeys(multimap, Predicates.not(Predicates.equalTo(\"foo\")));\n",
        "734": "                    multimap =\n",
        "735": "                        Multimaps.filterKeys(multimap, Predicates.not(Predicates.equalTo(\"bar\")));\n",
        "736": "                    return multimap;\n",
        "737": "                  }\n",
        "738": "                })\n",
        "739": "            .named(\"Multimaps.filterKeys[Multimaps.filterKeys[SetMultimap]]\")\n",
        "740": "            .withFeatures(\n",
        "741": "                CollectionSize.ANY,\n",
        "742": "                MultimapFeature.VALUE_COLLECTIONS_SUPPORT_ITERATOR_REMOVE,\n",
        "743": "                MapFeature.GENERAL_PURPOSE,\n",
        "744": "                MapFeature.ALLOWS_NULL_KEYS,\n",
        "745": "                MapFeature.ALLOWS_NULL_VALUES,\n",
        "746": "                MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "747": "            .createTestSuite());\n"
    },
    "removed": {
        "87": "    MultisetTestSuiteBuilder.NoRecurse.NO_ENTRY_SET,  // Cannot create entries with count > 1\n",
        "98": "  static void populateMultimapForGet(\n",
        "99": "      Multimap<Integer, String> multimap, String[] elements) {\n",
        "106": "  static void populateMultimapForKeySet(\n",
        "107": "      Multimap<String, Integer> multimap, String[] elements) {\n",
        "114": "  static void populateMultimapForValues(\n",
        "115": "      Multimap<Integer, String> multimap, String[] elements) {\n",
        "121": "  static void populateMultimapForKeys(\n",
        "122": "      Multimap<String, Integer> multimap, String[] elements) {\n",
        "129": "   * Implements {@code Multimap.put()} -- and no other methods -- for a {@code\n",
        "130": "   * Map} by ignoring all but the latest value for each key. This class exists\n",
        "131": "   * only so that we can use\n",
        "132": "   * {@link MultimapsCollectionTest#populateMultimapForGet(Multimap, String[])}\n",
        "133": "   * and similar methods to populate a map to be passed to\n",
        "134": "   * {@link Multimaps#forMap(Map)}. All tests should run against the result of\n",
        "135": "   * {@link #build()}.\n",
        "137": "  private static final class PopulatableMapAsMultimap<K, V>\n",
        "138": "      extends ForwardingMultimap<K, V> {\n",
        "146": "    @SuppressWarnings(\"unchecked\")  // all methods throw immediately\n",
        "149": "      this.unusableDelegate = (SetMultimap<K, V>) newProxyInstance(\n",
        "150": "          SetMultimap.class.getClassLoader(),\n",
        "151": "          new Class<?>[] {SetMultimap.class},\n",
        "152": "          new InvocationHandler() {\n",
        "153": "            @Override\n",
        "154": "            public Object invoke(Object proxy, Method method, Object[] args)\n",
        "155": "                throws Throwable {\n",
        "156": "              throw new UnsupportedOperationException();\n",
        "157": "            }\n",
        "158": "          });\n",
        "159": "    }\n",
        "160": "\n",
        "161": "    @Override protected Multimap<K, V> delegate() {\n",
        "165": "    @Override public boolean put(K key, V value) {\n",
        "207": "    public List<Entry<String, Integer>> order(\n",
        "208": "        List<Entry<String, Integer>> insertionOrder) {\n",
        "213": "  public abstract static class TestEntriesListGenerator\n",
        "214": "      extends TestEntriesGenerator\n",
        "216": "    @Override public List<Entry<String, Integer>> create(Object... elements) {\n",
        "221": "  private static final Predicate<Entry<Integer, String>> FILTER_GET_PREDICATE\n",
        "222": "      = new Predicate<Entry<Integer, String>>() {\n",
        "223": "        @Override public boolean apply(Entry<Integer, String> entry) {\n",
        "226": "    };\n",
        "228": "  private static final Predicate<Entry<String, Integer>> FILTER_KEYSET_PREDICATE\n",
        "229": "    = new Predicate<Entry<String, Integer>>() {\n",
        "230": "      @Override public boolean apply(Entry<String, Integer> entry) {\n",
        "231": "        return !\"badkey\".equals(entry.getKey()) && 55556 != entry.getValue();\n",
        "232": "      }\n",
        "233": "  };\n",
        "241": "    suite.addTest(ListMultimapTestSuiteBuilder.using(new TestStringListMultimapGenerator() {\n",
        "242": "        @Override\n",
        "243": "        protected ListMultimap<String, String> create(Entry<String, String>[] entries) {\n",
        "244": "          ListMultimap<String, String> multimap = Multimaps.synchronizedListMultimap(\n",
        "245": "              ArrayListMultimap.<String, String> create());\n",
        "246": "          for (Entry<String, String> entry : entries) {\n",
        "247": "            multimap.put(entry.getKey(), entry.getValue());\n",
        "248": "          }\n",
        "249": "          return multimap;\n",
        "250": "        }\n",
        "251": "      })\n",
        "252": "      .named(\"synchronized ArrayListMultimap\")\n",
        "253": "      .withFeatures(\n",
        "254": "          MapFeature.ALLOWS_NULL_KEYS,\n",
        "255": "          MapFeature.ALLOWS_NULL_VALUES,\n",
        "256": "          MapFeature.ALLOWS_ANY_NULL_QUERIES,\n",
        "257": "          MapFeature.GENERAL_PURPOSE,\n",
        "258": "          MapFeature.FAILS_FAST_ON_CONCURRENT_MODIFICATION,\n",
        "259": "          CollectionFeature.SUPPORTS_ITERATOR_REMOVE,\n",
        "260": "          CollectionSize.ANY)\n",
        "261": "      .createTestSuite());\n",
        "262": "\n",
        "263": "    suite.addTest(SetTestSuiteBuilder.using(\n",
        "264": "        new TestStringSetGenerator() {\n",
        "265": "          @Override protected Set<String> create(String[] elements) {\n",
        "266": "            PopulatableMapAsMultimap<Integer, String> multimap\n",
        "267": "                = PopulatableMapAsMultimap.create();\n",
        "268": "            populateMultimapForGet(multimap, elements);\n",
        "269": "            return multimap.build().get(3);\n",
        "270": "          }\n",
        "271": "        })\n",
        "272": "        .named(\"Multimaps.forMap.get\")\n",
        "273": "        .withFeatures(FOR_MAP_FEATURES_ONE)\n",
        "274": "        .createTestSuite());\n",
        "275": "\n",
        "276": "    suite.addTest(SetTestSuiteBuilder.using(\n",
        "277": "        new TestStringSetGenerator() {\n",
        "278": "          @Override protected Set<String> create(String[] elements) {\n",
        "279": "            PopulatableMapAsMultimap<String, Integer> multimap\n",
        "280": "                = PopulatableMapAsMultimap.create();\n",
        "281": "            populateMultimapForKeySet(multimap, elements);\n",
        "282": "            return multimap.build().keySet();\n",
        "283": "          }\n",
        "284": "        })\n",
        "285": "        .named(\"Multimaps.forMap.keySet\")\n",
        "286": "        .withFeatures(FOR_MAP_FEATURES_ANY)\n",
        "287": "        .createTestSuite());\n",
        "291": "    suite.addTest(MultisetTestSuiteBuilder.using(\n",
        "292": "        new TestStringMultisetGenerator() {\n",
        "293": "          @Override protected Multiset<String> create(String[] elements) {\n",
        "294": "            PopulatableMapAsMultimap<String, Integer> multimap\n",
        "295": "                = PopulatableMapAsMultimap.create();\n",
        "296": "            populateMultimapForKeys(multimap, elements);\n",
        "297": "            return multimap.build().keys();\n",
        "298": "          }\n",
        "299": "        })\n",
        "300": "        .named(\"Multimaps.forMap.keys\")\n",
        "301": "        .withFeatures(FOR_MAP_FEATURES_ANY)\n",
        "302": "        .suppressing(getCountDuplicateInitializingMethods())\n",
        "303": "        .suppressing(getSetCountDuplicateInitializingMethods())\n",
        "304": "        .suppressing(getIteratorDuplicateInitializingMethods())\n",
        "305": "        .suppressing(getRemoveDuplicateInitializingMethods())\n",
        "306": "        .createTestSuite());\n",
        "313": "  static abstract class TransformedMultimapGenerator<M extends Multimap<String, String>>\n",
        "375": "    static final Function<String, String> FUNCTION = new Function<String, String>() {\n",
        "376": "      @Override\n",
        "377": "      public String apply(String value) {\n",
        "378": "        return Ascii.toLowerCase(value);\n",
        "379": "      }\n",
        "380": "    };\n",
        "384": "      @Override\n",
        "385": "      public String transformEntry(String key, String value) {\n",
        "386": "        return Ascii.toLowerCase(value);\n",
        "387": "      }\n",
        "388": "    };\n",
        "391": "  static abstract class TransformedListMultimapGenerator\n",
        "393": "      implements TestListMultimapGenerator<String, String> {\n",
        "394": "  }\n",
        "398": "    suite.addTest(MultimapTestSuiteBuilder.using(\n",
        "399": "        new TransformedMultimapGenerator<Multimap<String,String>>() {\n",
        "400": "          @Override\n",
        "401": "          Multimap<String, String> transform(Multimap<String, String> multimap) {\n",
        "402": "            return Multimaps.transformValues(multimap, FUNCTION);\n",
        "403": "          }\n",
        "404": "        })\n",
        "405": "        .named(\"Multimaps.transformValues[Multimap]\")\n",
        "406": "        .withFeatures(\n",
        "407": "            CollectionSize.ANY,\n",
        "408": "            MapFeature.SUPPORTS_REMOVE,\n",
        "409": "            CollectionFeature.SUPPORTS_ITERATOR_REMOVE,\n",
        "410": "            MapFeature.ALLOWS_NULL_KEYS,\n",
        "411": "            MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "412": "        .createTestSuite());\n",
        "413": "    suite.addTest(MultimapTestSuiteBuilder.using(\n",
        "414": "        new TransformedMultimapGenerator<Multimap<String,String>>() {\n",
        "415": "          @Override\n",
        "416": "          Multimap<String, String> transform(Multimap<String, String> multimap) {\n",
        "417": "            return Multimaps.transformEntries(multimap, ENTRY_TRANSFORMER);\n",
        "418": "          }\n",
        "419": "        })\n",
        "420": "        .named(\"Multimaps.transformEntries[Multimap]\")\n",
        "421": "        .withFeatures(\n",
        "422": "            CollectionSize.ANY,\n",
        "423": "            MapFeature.SUPPORTS_REMOVE,\n",
        "424": "            CollectionFeature.SUPPORTS_ITERATOR_REMOVE,\n",
        "425": "            MapFeature.ALLOWS_NULL_KEYS,\n",
        "426": "            MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "427": "        .createTestSuite());\n",
        "428": "    suite.addTest(ListMultimapTestSuiteBuilder.using(new TransformedListMultimapGenerator() {\n",
        "429": "          @Override\n",
        "430": "          ListMultimap<String, String> transform(Multimap<String, String> multimap) {\n",
        "431": "            return Multimaps.transformValues((ListMultimap<String, String>) multimap, FUNCTION);\n",
        "432": "          }\n",
        "433": "        })\n",
        "434": "        .named(\"Multimaps.transformValues[ListMultimap]\")\n",
        "435": "        .withFeatures(\n",
        "436": "            CollectionSize.ANY,\n",
        "437": "            MapFeature.SUPPORTS_REMOVE,\n",
        "438": "            CollectionFeature.SUPPORTS_ITERATOR_REMOVE,\n",
        "439": "            MapFeature.ALLOWS_NULL_KEYS,\n",
        "440": "            MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "441": "        .createTestSuite());\n",
        "442": "    suite.addTest(ListMultimapTestSuiteBuilder.using(new TransformedListMultimapGenerator() {\n",
        "443": "          @Override\n",
        "444": "          ListMultimap<String, String> transform(Multimap<String, String> multimap) {\n",
        "445": "            return Multimaps.transformEntries(\n",
        "446": "                (ListMultimap<String, String>) multimap, ENTRY_TRANSFORMER);\n",
        "447": "          }\n",
        "448": "        })\n",
        "449": "        .named(\"Multimaps.transformEntries[ListMultimap]\")\n",
        "450": "        .withFeatures(\n",
        "451": "            CollectionSize.ANY,\n",
        "452": "            MapFeature.SUPPORTS_REMOVE,\n",
        "453": "            CollectionFeature.SUPPORTS_ITERATOR_REMOVE,\n",
        "454": "            MapFeature.ALLOWS_NULL_KEYS,\n",
        "455": "            MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "456": "        .createTestSuite());\n",
        "463": "  static abstract class TestFilteredMultimapGenerator<M extends Multimap<String, Integer>>\n",
        "508": "  static abstract class FilteredSetMultimapGenerator\n",
        "531": "  static abstract class FilteredListMultimapGenerator\n",
        "556": "    suite.addTest(SetMultimapTestSuiteBuilder.using(new FilteredSetMultimapGenerator() {\n",
        "557": "        @Override\n",
        "558": "        SetMultimap<String, Integer> filter(SetMultimap<String, Integer> multimap) {\n",
        "559": "          multimap.put(\"foo\", 17);\n",
        "560": "          multimap.put(\"bar\", 32);\n",
        "561": "          multimap.put(\"foo\", 16);\n",
        "562": "          return Multimaps.filterKeys(multimap,\n",
        "563": "              Predicates.not(Predicates.in(ImmutableSet.of(\"foo\", \"bar\"))));\n",
        "564": "        }\n",
        "565": "      })\n",
        "566": "      .named(\"Multimaps.filterKeys[SetMultimap, Predicate]\")\n",
        "567": "      .withFeatures(\n",
        "568": "          CollectionSize.ANY,\n",
        "569": "          MultimapFeature.VALUE_COLLECTIONS_SUPPORT_ITERATOR_REMOVE,\n",
        "570": "          MapFeature.GENERAL_PURPOSE,\n",
        "571": "          MapFeature.ALLOWS_NULL_KEYS,\n",
        "572": "          MapFeature.ALLOWS_NULL_VALUES,\n",
        "573": "          MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "574": "      .createTestSuite());\n",
        "575": "\n",
        "576": "    suite.addTest(ListMultimapTestSuiteBuilder.using(new FilteredListMultimapGenerator() {\n",
        "577": "        @Override\n",
        "578": "        ListMultimap<String, Integer> filter(ListMultimap<String, Integer> multimap) {\n",
        "579": "          multimap.put(\"foo\", 17);\n",
        "580": "          multimap.put(\"bar\", 32);\n",
        "581": "          multimap.put(\"foo\", 16);\n",
        "582": "          return Multimaps.filterKeys(multimap,\n",
        "583": "              Predicates.not(Predicates.in(ImmutableSet.of(\"foo\", \"bar\"))));\n",
        "584": "        }\n",
        "585": "      })\n",
        "586": "      .named(\"Multimaps.filterKeys[ListMultimap, Predicate]\")\n",
        "587": "      .withFeatures(\n",
        "588": "          CollectionSize.ANY,\n",
        "589": "          MultimapFeature.VALUE_COLLECTIONS_SUPPORT_ITERATOR_REMOVE,\n",
        "590": "          MapFeature.GENERAL_PURPOSE,\n",
        "591": "          MapFeature.ALLOWS_NULL_KEYS,\n",
        "592": "          MapFeature.ALLOWS_NULL_VALUES,\n",
        "593": "          MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "594": "      .createTestSuite());\n",
        "595": "    suite.addTest(ListMultimapTestSuiteBuilder.using(new FilteredListMultimapGenerator() {\n",
        "596": "        @Override\n",
        "597": "        ListMultimap<String, Integer> filter(ListMultimap<String, Integer> multimap) {\n",
        "598": "          multimap.put(\"foo\", 17);\n",
        "599": "          multimap.put(\"bar\", 32);\n",
        "600": "          multimap.put(\"foo\", 16);\n",
        "601": "          multimap = Multimaps.filterKeys(multimap, Predicates.not(Predicates.equalTo(\"foo\")));\n",
        "602": "          return Multimaps.filterKeys(multimap, Predicates.not(Predicates.equalTo(\"bar\")));\n",
        "603": "        }\n",
        "604": "      })\n",
        "605": "      .named(\"Multimaps.filterKeys[Multimaps.filterKeys[ListMultimap], Predicate]\")\n",
        "606": "      .withFeatures(\n",
        "607": "          CollectionSize.ANY,\n",
        "608": "          MultimapFeature.VALUE_COLLECTIONS_SUPPORT_ITERATOR_REMOVE,\n",
        "609": "          MapFeature.GENERAL_PURPOSE,\n",
        "610": "          MapFeature.ALLOWS_NULL_KEYS,\n",
        "611": "          MapFeature.ALLOWS_NULL_VALUES,\n",
        "612": "          MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "613": "      .createTestSuite());\n",
        "614": "    suite.addTest(SetMultimapTestSuiteBuilder.using(new FilteredSetMultimapGenerator() {\n",
        "615": "        @Override\n",
        "616": "        SetMultimap<String, Integer> filter(SetMultimap<String, Integer> multimap) {\n",
        "617": "          multimap.put(\"one\", 314);\n",
        "618": "          multimap.put(\"two\", 159);\n",
        "619": "          multimap.put(\"one\", 265);\n",
        "620": "          return Multimaps.filterValues(multimap,\n",
        "621": "              Predicates.not(Predicates.in(ImmutableSet.of(314, 159, 265))));\n",
        "622": "        }\n",
        "623": "      })\n",
        "624": "      .named(\"Multimaps.filterValues[SetMultimap, Predicate]\")\n",
        "625": "      .withFeatures(\n",
        "626": "          CollectionSize.ANY,\n",
        "627": "          MapFeature.GENERAL_PURPOSE,\n",
        "628": "          MapFeature.ALLOWS_NULL_KEYS,\n",
        "629": "          MapFeature.ALLOWS_NULL_VALUES,\n",
        "630": "          MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "631": "      .createTestSuite());\n",
        "632": "    suite.addTest(SetMultimapTestSuiteBuilder.using(new FilteredSetMultimapGenerator() {\n",
        "633": "        @Override\n",
        "634": "        SetMultimap<String, Integer> filter(SetMultimap<String, Integer> multimap) {\n",
        "635": "          ImmutableSetMultimap<String, Integer> badEntries =\n",
        "636": "              ImmutableSetMultimap.of(\"foo\", 314, \"one\", 159, \"two\", 265, \"bar\", 358);\n",
        "637": "          multimap.putAll(badEntries);\n",
        "638": "          return Multimaps.filterEntries(multimap,\n",
        "639": "              Predicates.not(Predicates.in(badEntries.entries())));\n",
        "640": "        }\n",
        "641": "      })\n",
        "642": "      .named(\"Multimaps.filterEntries[SetMultimap, Predicate]\")\n",
        "643": "      .withFeatures(\n",
        "644": "          CollectionSize.ANY,\n",
        "645": "          MapFeature.GENERAL_PURPOSE,\n",
        "646": "          MapFeature.ALLOWS_NULL_KEYS,\n",
        "647": "          MapFeature.ALLOWS_NULL_VALUES,\n",
        "648": "          MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "649": "      .createTestSuite());\n",
        "650": "    suite.addTest(SetMultimapTestSuiteBuilder.using(new FilteredSetMultimapGenerator() {\n",
        "651": "        @Override\n",
        "652": "        SetMultimap<String, Integer> filter(SetMultimap<String, Integer> multimap) {\n",
        "653": "          ImmutableSetMultimap<String, Integer> badEntries =\n",
        "654": "              ImmutableSetMultimap.of(\"foo\", 314, \"one\", 159, \"two\", 265, \"bar\", 358);\n",
        "655": "          multimap.putAll(badEntries);\n",
        "656": "          multimap = Multimaps.filterKeys(multimap,\n",
        "657": "              Predicates.not(Predicates.in(ImmutableSet.of(\"foo\", \"bar\"))));\n",
        "658": "          return Multimaps.filterEntries(multimap,\n",
        "659": "              Predicates.not(Predicates.in(badEntries.entries())));\n",
        "660": "        }\n",
        "661": "      })\n",
        "662": "      .named(\"Multimaps.filterEntries[Multimaps.filterKeys[SetMultimap]]\")\n",
        "663": "      .withFeatures(\n",
        "664": "          CollectionSize.ANY,\n",
        "665": "          MapFeature.GENERAL_PURPOSE,\n",
        "666": "          MapFeature.ALLOWS_NULL_KEYS,\n",
        "667": "          MapFeature.ALLOWS_NULL_VALUES,\n",
        "668": "          MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "669": "      .createTestSuite());\n",
        "670": "    suite.addTest(SetMultimapTestSuiteBuilder.using(new FilteredSetMultimapGenerator() {\n",
        "671": "        @Override\n",
        "672": "        SetMultimap<String, Integer> filter(SetMultimap<String, Integer> multimap) {\n",
        "673": "          ImmutableSetMultimap<String, Integer> badEntries =\n",
        "674": "              ImmutableSetMultimap.of(\"foo\", 314, \"one\", 159, \"two\", 265, \"bar\", 358);\n",
        "675": "          multimap.putAll(badEntries);\n",
        "676": "          multimap = Multimaps.filterEntries(multimap,\n",
        "677": "              Predicates.not(Predicates.in(ImmutableMap.of(\"one\", 159, \"two\", 265).entrySet())));\n",
        "678": "          return Multimaps.filterKeys(multimap,\n",
        "679": "              Predicates.not(Predicates.in(ImmutableSet.of(\"foo\", \"bar\"))));\n",
        "680": "        }\n",
        "681": "      })\n",
        "682": "      .named(\"Multimaps.filterKeys[Multimaps.filterEntries[SetMultimap]]\")\n",
        "683": "      .withFeatures(\n",
        "684": "          CollectionSize.ANY,\n",
        "685": "          MapFeature.GENERAL_PURPOSE,\n",
        "686": "          MapFeature.ALLOWS_NULL_KEYS,\n",
        "687": "          MapFeature.ALLOWS_NULL_VALUES,\n",
        "688": "          MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "689": "      .createTestSuite());\n",
        "690": "    suite.addTest(SetMultimapTestSuiteBuilder.using(new FilteredSetMultimapGenerator() {\n",
        "691": "        @Override\n",
        "692": "        SetMultimap<String, Integer> filter(SetMultimap<String, Integer> multimap) {\n",
        "693": "          ImmutableSetMultimap<String, Integer> badEntries =\n",
        "694": "              ImmutableSetMultimap.of(\"foo\", 314, \"bar\", 358);\n",
        "695": "          multimap.putAll(badEntries);\n",
        "696": "          multimap = Multimaps.filterKeys(multimap, Predicates.not(Predicates.equalTo(\"foo\")));\n",
        "697": "          multimap = Multimaps.filterKeys(multimap, Predicates.not(Predicates.equalTo(\"bar\")));\n",
        "698": "          return multimap;\n",
        "699": "        }\n",
        "700": "      })\n",
        "701": "      .named(\"Multimaps.filterKeys[Multimaps.filterKeys[SetMultimap]]\")\n",
        "702": "      .withFeatures(\n",
        "703": "          CollectionSize.ANY,\n",
        "704": "          MultimapFeature.VALUE_COLLECTIONS_SUPPORT_ITERATOR_REMOVE,\n",
        "705": "          MapFeature.GENERAL_PURPOSE,\n",
        "706": "          MapFeature.ALLOWS_NULL_KEYS,\n",
        "707": "          MapFeature.ALLOWS_NULL_VALUES,\n",
        "708": "          MapFeature.ALLOWS_ANY_NULL_QUERIES)\n",
        "709": "      .createTestSuite());\n"
    }
}