{
    "addition": {
        "31": "import java.io.File;\n",
        "33": "import java.io.PrintWriter;\n",
        "35": "import java.net.URLClassLoader;\n",
        "136": "  public void testGetResource_contextClassLoader() throws IOException {\n",
        "137": "    // Check that we can find a resource if it is visible to the context class\n",
        "138": "    // loader, even if it is not visible to the loader of the Resources class.\n",
        "139": "\n",
        "140": "    File tempFile = createTempFile();\n",
        "141": "    PrintWriter writer = new PrintWriter(tempFile, \"UTF-8\");\n",
        "142": "    writer.println(\"rud a chur ar an m\u00e9ar fhada\");\n",
        "143": "    writer.close();\n",
        "144": "\n",
        "145": "    // First check that we can't find it without setting the context loader.\n",
        "146": "    // This is a sanity check that the test doesn't spuriously pass because\n",
        "147": "    // the resource is visible to the system class loader.\n",
        "148": "    try {\n",
        "149": "      Resources.getResource(tempFile.getName());\n",
        "150": "      fail(\"Should get IllegalArgumentException\");\n",
        "151": "    } catch (IllegalArgumentException expected) {\n",
        "152": "    }\n",
        "153": "\n",
        "154": "    // Now set the context loader to one that should find the resource.\n",
        "155": "    URL baseUrl = tempFile.getParentFile().toURI().toURL();\n",
        "156": "    URLClassLoader loader = new URLClassLoader(new URL[] {baseUrl});\n",
        "157": "    ClassLoader oldContextLoader =\n",
        "158": "        Thread.currentThread().getContextClassLoader();\n",
        "159": "    try {\n",
        "160": "      Thread.currentThread().setContextClassLoader(loader);\n",
        "161": "      URL url = Resources.getResource(tempFile.getName());\n",
        "162": "      String text = Resources.toString(url, Charsets.UTF_8);\n",
        "163": "      assertEquals(\"rud a chur ar an m\u00e9ar fhada\\n\", text);\n",
        "164": "    } finally {\n",
        "165": "      Thread.currentThread().setContextClassLoader(oldContextLoader);\n",
        "166": "    }\n",
        "167": "  }\n",
        "168": "\n",
        "169": "  public void testGetResource_contextClassLoaderNull() {\n",
        "170": "    ClassLoader oldContextLoader =\n",
        "171": "        Thread.currentThread().getContextClassLoader();\n",
        "172": "    try {\n",
        "173": "      Thread.currentThread().setContextClassLoader(null);\n",
        "174": "      assertNotNull(\n",
        "175": "          Resources.getResource(\"com/google/common/io/testdata/i18n.txt\"));\n",
        "176": "      try {\n",
        "177": "        Resources.getResource(\"no such resource\");\n",
        "178": "        fail(\"Should get IllegalArgumentException\");\n",
        "179": "      } catch (IllegalArgumentException expected) {\n",
        "180": "      }\n",
        "181": "    } finally {\n",
        "182": "      Thread.currentThread().setContextClassLoader(oldContextLoader);\n",
        "183": "    }\n",
        "184": "  }\n",
        "185": "\n"
    },
    "removed": {}
}